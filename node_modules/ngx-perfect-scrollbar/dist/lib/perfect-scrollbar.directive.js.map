{"version":3,"file":"perfect-scrollbar.directive.js","sourceRoot":"","sources":["../../src/lib/perfect-scrollbar.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import PerfectScrollbar from 'perfect-scrollbar';\n\nimport ResizeObserver from 'resize-observer-polyfill';\n\nimport { Subject, fromEvent } from 'rxjs';\n\nimport { takeUntil, debounceTime } from 'rxjs/operators';\n\nimport { PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { NgZone, Inject, Optional, ElementRef, Directive,\n  OnInit, DoCheck, OnChanges, OnDestroy, Input, Output, EventEmitter,\n  SimpleChanges, KeyValueDiffer, KeyValueDiffers } from '@angular/core';\n\nimport { Geometry, Position } from './perfect-scrollbar.interfaces';\n\nimport { PERFECT_SCROLLBAR_CONFIG, PerfectScrollbarConfig, PerfectScrollbarConfigInterface,\n  PerfectScrollbarEvent, PerfectScrollbarEvents } from './perfect-scrollbar.interfaces';\n\n@Directive({\n  selector: '[perfectScrollbar]',\n  exportAs: 'ngxPerfectScrollbar'\n})\nexport class PerfectScrollbarDirective implements OnInit, OnDestroy, DoCheck, OnChanges {\n  private instance: PerfectScrollbar | null = null;\n\n  private ro: ResizeObserver | null = null;\n\n  private timeout: number | null = null;\n  private animation: number | null = null;\n\n  private configDiff: KeyValueDiffer<string, any> | null = null;\n\n  private readonly ngDestroy: Subject<void> = new Subject();\n\n  @Input() disabled: boolean = false;\n\n  @Input('perfectScrollbar') config?: PerfectScrollbarConfigInterface;\n\n  @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor(private zone: NgZone, private differs: KeyValueDiffers,\n    public elementRef: ElementRef, @Inject(PLATFORM_ID) private platformId: Object,\n    @Optional() @Inject(PERFECT_SCROLLBAR_CONFIG) private defaults: PerfectScrollbarConfigInterface) {}\n\n  ngOnInit(): void {\n    if (!this.disabled && isPlatformBrowser(this.platformId)) {\n      const config = new PerfectScrollbarConfig(this.defaults);\n\n      config.assign(this.config); // Custom configuration\n\n      this.zone.runOutsideAngular(() => {\n        this.instance = new PerfectScrollbar(this.elementRef.nativeElement, config);\n      });\n\n      if (!this.configDiff) {\n        this.configDiff = this.differs.find(this.config || {}).create();\n\n        this.configDiff.diff(this.config || {});\n      }\n\n      this.zone.runOutsideAngular(() => {\n        this.ro = new ResizeObserver(() => {\n          this.update();\n        });\n\n        if (this.elementRef.nativeElement.children[0]) {\n          this.ro.observe(this.elementRef.nativeElement.children[0]);\n        }\n\n        this.ro.observe(this.elementRef.nativeElement);\n      });\n\n      this.zone.runOutsideAngular(() => {\n        PerfectScrollbarEvents.forEach((eventName: PerfectScrollbarEvent) => {\n          const eventType = eventName.replace(/([A-Z])/g, (c) => `-${c.toLowerCase()}`);\n\n          fromEvent<Event>(this.elementRef.nativeElement, eventType)\n            .pipe(\n              debounceTime(20),\n              takeUntil(this.ngDestroy)\n            )\n            .subscribe((event: Event) => {\n              this[eventName].emit(event);\n            });\n        });\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      this.ngDestroy.next();\n      this.ngDestroy.complete();\n\n      if (this.ro) {\n        this.ro.disconnect();\n      }\n\n      if (this.timeout && typeof window !== 'undefined') {\n        window.clearTimeout(this.timeout);\n      }\n\n      this.zone.runOutsideAngular(() => {\n        if (this.instance) {\n          this.instance.destroy();\n        }\n      });\n\n      this.instance = null;\n    }\n  }\n\n  ngDoCheck(): void {\n    if (!this.disabled && this.configDiff && isPlatformBrowser(this.platformId)) {\n      const changes = this.configDiff.diff(this.config || {});\n\n      if (changes) {\n        this.ngOnDestroy();\n\n        this.ngOnInit();\n      }\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['disabled'] && !changes['disabled'].isFirstChange() && isPlatformBrowser(this.platformId)) {\n      if (changes['disabled'].currentValue !== changes['disabled'].previousValue) {\n        if (changes['disabled'].currentValue === true) {\n         this.ngOnDestroy();\n        } else if (changes['disabled'].currentValue === false) {\n          this.ngOnInit();\n        }\n      }\n    }\n  }\n\n  public ps(): PerfectScrollbar | null {\n    return this.instance;\n  }\n\n  public update(): void {\n    if (typeof window !== 'undefined') {\n      if (this.timeout) {\n        window.clearTimeout(this.timeout);\n      }\n\n      this.timeout = window.setTimeout(() => {\n        if (!this.disabled && this.configDiff) {\n          try {\n            this.zone.runOutsideAngular(() => {\n              if (this.instance) {\n                this.instance.update();\n              }\n            });\n          } catch (error) {\n            // Update can be finished after destroy so catch errors\n          }\n        }\n      }, 0);\n    }\n  }\n\n  public geometry(prefix: string = 'scroll'): Geometry {\n    return new Geometry(\n      this.elementRef.nativeElement[prefix + 'Left'],\n      this.elementRef.nativeElement[prefix + 'Top'],\n      this.elementRef.nativeElement[prefix + 'Width'],\n      this.elementRef.nativeElement[prefix + 'Height']\n    );\n  }\n\n  public position(absolute: boolean = false): Position {\n    if (!absolute && this.instance) {\n      return new Position(\n        this.instance.reach.x || 0,\n        this.instance.reach.y || 0\n      );\n    } else {\n      return new Position(\n        this.elementRef.nativeElement.scrollLeft,\n        this.elementRef.nativeElement.scrollTop\n      );\n    }\n  }\n\n  public scrollable(direction: string = 'any'): boolean {\n    const element = this.elementRef.nativeElement;\n\n    if (direction === 'any') {\n      return element.classList.contains('ps--active-x') ||\n        element.classList.contains('ps--active-y');\n    } else if (direction === 'both') {\n      return element.classList.contains('ps--active-x') &&\n        element.classList.contains('ps--active-y');\n    } else {\n      return element.classList.contains('ps--active-' + direction);\n    }\n  }\n\n  public scrollTo(x: number, y?: number, speed?: number): void {\n    if (!this.disabled) {\n      if (y == null && speed == null) {\n        this.animateScrolling('scrollTop', x, speed);\n      } else {\n        if (x != null) {\n          this.animateScrolling('scrollLeft', x, speed);\n        }\n\n        if (y != null) {\n          this.animateScrolling('scrollTop', y, speed);\n        }\n      }\n    }\n  }\n\n  public scrollToX(x: number, speed?: number): void {\n    this.animateScrolling('scrollLeft', x, speed);\n  }\n\n  public scrollToY(y: number, speed?: number): void {\n    this.animateScrolling('scrollTop', y, speed);\n  }\n\n  public scrollToTop(offset?: number, speed?: number): void {\n    this.animateScrolling('scrollTop', (offset || 0), speed);\n  }\n\n  public scrollToLeft(offset?: number, speed?: number): void {\n    this.animateScrolling('scrollLeft', (offset || 0), speed);\n  }\n\n  public scrollToRight(offset?: number, speed?: number): void {\n    const left = this.elementRef.nativeElement.scrollWidth -\n      this.elementRef.nativeElement.clientWidth;\n\n    this.animateScrolling('scrollLeft', left - (offset || 0), speed);\n  }\n\n  public scrollToBottom(offset?: number, speed?: number): void {\n    const top = this.elementRef.nativeElement.scrollHeight -\n      this.elementRef.nativeElement.clientHeight;\n\n    this.animateScrolling('scrollTop', top - (offset || 0), speed);\n  }\n\n  public scrollToElement(qs: string, offset?: number, speed?: number): void {\n    const element = this.elementRef.nativeElement.querySelector(qs);\n\n    if (element) {\n      const elementPos = element.getBoundingClientRect();\n\n      const scrollerPos = this.elementRef.nativeElement.getBoundingClientRect();\n\n      if (this.elementRef.nativeElement.classList.contains('ps--active-x')) {\n        const currentPos = this.elementRef.nativeElement['scrollLeft'];\n\n        const position = elementPos.left - scrollerPos.left + currentPos;\n\n        this.animateScrolling('scrollLeft', position + (offset || 0), speed);\n      }\n\n      if (this.elementRef.nativeElement.classList.contains('ps--active-y')) {\n        const currentPos = this.elementRef.nativeElement['scrollTop'];\n\n        const position = elementPos.top - scrollerPos.top + currentPos;\n\n        this.animateScrolling('scrollTop', position + (offset || 0), speed);\n      }\n    }\n  }\n\n  private animateScrolling(target: string, value: number, speed?: number): void {\n    if (this.animation) {\n      window.cancelAnimationFrame(this.animation);\n\n      this.animation = null;\n    }\n\n    if (!speed || typeof window === 'undefined') {\n      this.elementRef.nativeElement[target] = value;\n    } else if (value !== this.elementRef.nativeElement[target]) {\n      let newValue = 0;\n      let scrollCount = 0;\n\n      let oldTimestamp = performance.now();\n      let oldValue = this.elementRef.nativeElement[target];\n\n      const cosParameter = (oldValue - value) / 2;\n\n      const step = (newTimestamp: number) => {\n        scrollCount += Math.PI / (speed / (newTimestamp - oldTimestamp));\n\n        newValue = Math.round(value + cosParameter + cosParameter * Math.cos(scrollCount));\n\n        // Only continue animation if scroll position has not changed\n        if (this.elementRef.nativeElement[target] === oldValue) {\n          if (scrollCount >= Math.PI) {\n            this.animateScrolling(target, value, 0);\n          } else {\n            this.elementRef.nativeElement[target] = newValue;\n\n            // On a zoomed out page the resulting offset may differ\n            oldValue = this.elementRef.nativeElement[target];\n\n            oldTimestamp = newTimestamp;\n\n            this.animation = window.requestAnimationFrame(step);\n          }\n        }\n      };\n\n      window.requestAnimationFrame(step);\n    }\n  }\n}\n"]}