!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-starrating",["exports","@angular/core","@angular/forms","@angular/common","rxjs"],t):t((e=e||self)["ng-starrating"]={},e.ng.core,e.ng.forms,e.ng.common,e.rxjs)}(this,function(e,t,n,a,s){"use strict";var i=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"lib-rating",template:"\n    <p>\n      rating works!\n    </p>\n  "}]}],e.ctorParameters=function(){return[]},e}(),r=function(){function e(){var e=this;this.stars=[],this._readOnly=!1,this.rate=new t.EventEmitter,this.onValueChange||(this.onValueChange=new s.Subject,this.onValueChange.subscribe(function(){e.generateRating(),e.applySizeAllStars()})),this.onCheckedColorChange||(this.onCheckedColorChange=new s.Subject,this.onCheckedColorChange.subscribe(function(){e.applyColorStyleAllStars(!0)})),this.onUnCheckedColorChange||(this.onUnCheckedColorChange=new s.Subject,this.onUnCheckedColorChange.subscribe(function(){e.applyColorStyleAllStars(!1)})),this.onSizeChange||(this.onSizeChange=new s.Subject,this.onSizeChange.subscribe(function(){e.applySizeAllStars()})),this.onReadOnlyChange||(this.onReadOnlyChange=new s.Subject,this.onReadOnlyChange.subscribe(function(){e.addRemoveEvents()}))}return Object.defineProperty(e.prototype,"checkedcolor",{get:function(){return this._checkedColor},set:function(e){this._checkedColor=e,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uncheckedcolor",{get:function(){return this._unCheckedColor},set:function(e){this._unCheckedColor=e,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e&&null!=e||(e=0),e>5&&(e=5),this._value=e,this._value>=0&&this.onValueChange.next(this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size.concat(this._size.includes("px")?"":"px")},set:function(e){e&&null!=e&&"0px"!=e||(e="24px"),this._size=e,this.onSizeChange.next(this._size)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return"true"===String(this._readOnly)},set:function(e){this._readOnly=e,this.onReadOnlyChange.next(e)},enumerable:!0,configurable:!0}),e.prototype.makeEditable=function(){var e=this;this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(function(t){t.nativeElement.addEventListener("click",e.onRate.bind(e)),t.nativeElement.addEventListener("mouseenter",e.onStar.bind(e)),t.nativeElement.style.cursor="pointer",t.nativeElement.title=t.nativeElement.dataset.index})},e.prototype.makeReadOnly=function(){this.mainElement.nativeElement.__zone_symbol__mouseleavefalse=null,this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach(function(e){e.nativeElement.__zone_symbol__clickfalse=null,e.nativeElement.__zone_symbol__mouseenterfalse=null,e.nativeElement.style.cursor="default",e.nativeElement.title=""})},e.prototype.addRemoveEvents=function(){this.readonly?this.makeReadOnly():(this.makeEditable(),this.onValueChange.next(this.value))},e.prototype.ngAfterViewInit=function(){},e.prototype.onRate=function(e){var t=e.srcElement,n=this.value;this.value=parseInt(t.dataset.index),0==this.value&&(this.value=1);var a={oldValue:n,newValue:this.value,starRating:this};this.rate.emit(a)},e.prototype.onStar=function(e){for(var t=e.srcElement,n=parseInt(t.dataset.index),a=0;a<n;a++)this.stars[a].nativeElement.classList=[],this.addDefaultClass(this.stars[a].nativeElement),this.addCheckedStarClass(this.stars[a].nativeElement);for(a=n;a<this.stars.length;a++)this.stars[a].nativeElement.classList=[],this.addDefaultClass(this.stars[a].nativeElement)},e.prototype.offStar=function(e){this.generateRating()},e.prototype.addDefaultClass=function(t){t.classList.add(e.CLS_DEFAULT_STAR)},e.prototype.addCheckedStarClass=function(t){t.classList.add(e.CLS_CHECKED_STAR)},e.prototype.addHalfStarClass=function(t){t.classList.add(e.CLS_HALF_STAR)},e.prototype.setStars=function(){0==this.stars.length&&(this.stars.push(this.star1Element),this.stars.push(this.star2Element),this.stars.push(this.star3Element),this.stars.push(this.star4Element),this.stars.push(this.star5Element))},e.prototype.applySizeAllStars=function(){var t=this;this._size&&this.stars.forEach(function(n){var a=t.size.match(/\d+/)[0],s=10*parseInt(a)/24,i=0-20*parseInt(a)/24;n.nativeElement.style.setProperty(e.VAR_SIZE,t.size),n.nativeElement.classList.contains(e.CLS_HALF_STAR)&&(n.nativeElement.style.setProperty(e.VAR_HALF_WIDTH,s+"px"),n.nativeElement.style.setProperty(e.VAR_HALF_MARGIN,i+"px"))})},e.prototype.applyColorStyleAllStars=function(e){var t=this;this.stars.forEach(function(n){e?t.applyCheckedColorStyle(n.nativeElement):t.applyUnCheckedColorStyle(n.nativeElement)})},e.prototype.applyColorStyle=function(e){this.applyCheckedColorStyle(e),this.applyUnCheckedColorStyle(e)},e.prototype.applyCheckedColorStyle=function(t){t.style.setProperty(e.VAR_CHECKED_COLOR,this.checkedcolor)},e.prototype.applyUnCheckedColorStyle=function(t){t.style.setProperty(e.VAR_UNCHECKED_COLOR,this.uncheckedcolor)},e.prototype.generateRating=function(){var e=this;if(!this.readonly&&(this.setStars(),this.value>=0)){this.mainElement.nativeElement.title=this.value;var t=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),n=1;this.stars.forEach(function(a){a.nativeElement.classList=[],e.applyColorStyle(a.nativeElement),e.addDefaultClass(a.nativeElement),e.value>=n?e.addCheckedStarClass(a.nativeElement):t&&(e.addHalfStarClass(a.nativeElement),t=!1),n++})}},e.VAR_CHECKED_COLOR="--checkedColor",e.VAR_UNCHECKED_COLOR="--unCheckedColor",e.VAR_SIZE="--size",e.VAR_HALF_WIDTH="--halfWidth",e.VAR_HALF_MARGIN="--halfMargin",e.CLS_CHECKED_STAR="on",e.CLS_DEFAULT_STAR="star",e.CLS_HALF_STAR="half",e.INP_CHECKED_COLOR="checkedcolor",e.INP_UNCHECKED_COLOR="uncheckedcolor",e.INP_VALUE="value",e.INP_SIZE="size",e.INP_READONLY="readonly",e.decorators=[{type:t.Component,args:[{selector:"star-rating",template:'\n  <div #starMain>\n    <span data-index="1" title="1" #star1></span>\n    <span data-index="2" title="2" #star2></span>\n    <span data-index="3" title="3" #star3></span>\n    <span data-index="4" title="4" #star4></span>\n    <span data-index="5" title="5" #star5></span>\n  </div>\n  <style>\n    :root {\n      --checkedColor: gold;\n      --unCheckedColor: gray;\n      --size: 24px;\n      --halfWidth: 10px;\n      --halfMargin: -20px;\n    }  \n    .star {\n      cursor: pointer;\n      color: var(--unCheckedColor);\n      font-size: var(--size);\n      width: var(--size);\n      display: inline-block;\n    }\n    .star:last-child {\n      margin-right: 0;\n    }\n    .star:before {\n      content:\'\\2605\';\n    }\n    .star.on {\n      color: var(--checkedColor);\n    }\n    .star.half:after {\n      content:\'\\2605\';\n      color: var(--checkedColor);\n      position: absolute;\n      margin-left: var(--halfMargin);\n      width: var(--halfWidth);\n      overflow: hidden;\n    }\n  </style>\n   '}]}],e.ctorParameters=function(){return[]},e.propDecorators={mainElement:[{type:t.ViewChild,args:["starMain",{"static":!0}]}],star1Element:[{type:t.ViewChild,args:["star1",{"static":!0}]}],star2Element:[{type:t.ViewChild,args:["star2",{"static":!0}]}],star3Element:[{type:t.ViewChild,args:["star3",{"static":!0}]}],star4Element:[{type:t.ViewChild,args:["star4",{"static":!0}]}],star5Element:[{type:t.ViewChild,args:["star5",{"static":!0}]}],rate:[{type:t.Output}],checkedcolor:[{type:t.Input,args:[e.INP_CHECKED_COLOR]}],uncheckedcolor:[{type:t.Input,args:[e.INP_UNCHECKED_COLOR]}],value:[{type:t.Input,args:[e.INP_VALUE]}],size:[{type:t.Input,args:[e.INP_SIZE]}],readonly:[{type:t.Input,args:[e.INP_READONLY]}]},e}(),o=function(){function e(){}return e.prototype.ngDoBootstrap=function(){},e.decorators=[{type:t.NgModule,args:[{imports:[n.FormsModule,a.CommonModule],declarations:[i,r],exports:[r],entryComponents:[r]}]}],e}();e.RatingModule=o,e.StarRatingComponent=r,e.Éµa=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-starrating.umd.min.js.map